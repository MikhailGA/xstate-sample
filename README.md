# Стейт-машины во фронтенд-разработке

## Введение
Этот репозиторий демонстрирует использование стейт-машин для управления состоянием во фронтенд-приложениях. Этот подход делает логику приложения более предсказуемой, удобной для тестирования и масштабируемой.

## Что такое стейт-машина?
**Конечный автомат (Finite State Machine, FSM)** — это модель, которая описывает поведение системы через:
- **Конечное число состояний** (например, `idle`, `loading`, `success`, `error`)
- **Переходы между состояниями** (триггеры/события)
- **Действия**, выполняемые при переходах

В отличие от традиционного управления состоянием (например, React-хуков или Redux), стейт-машины явно задают правила переходов, уменьшая вероятность неожиданных ошибок.

## Пример: Загрузка данных

### Традиционный подход (без стейт-машины)
```javascript
const [data, setData] = useState(null);
const [isLoading, setIsLoading] = useState(false);
const [error, setError] = useState(null);

const fetchData = async () => {
  setIsLoading(true);
  try {
    const res = await api.getData();
    setData(res);
    setError(null);
  } catch (err) {
    setError(err);
  } finally {
    setIsLoading(false);
  }
};
```

**Проблемы:**
- Множество несвязанных состояний
- Возможны противоречивые комбинации (например, `isLoading = true` и `error !== null`)

### Подход со стейт-машиной (XState или кастомная реализация)
```javascript
const states = {
  idle: { on: { FETCH: "loading" } },
  loading: { 
    on: { 
      SUCCESS: "success", 
      FAILURE: "error" 
    },
    effect: () => { /* Вызов API */ }
  },
  success: { data: null },
  error: { message: "" }
};

let currentState = "idle";

function transition(state, event) {
  const nextState = states[state]?.on?.[event];
  if (nextState) currentState = nextState;
}
```

**Преимущества:**
- Явно определены состояния и переходы
- Невозможно попасть в недопустимое состояние (например, `loading` и `success` одновременно)
- Легко добавлять побочные эффекты (логирование, аналитика)

## Библиотеки для работы со стейт-машинами
- **[XState](https://xstate.js.org/)** - Наиболее популярная, с визуальным редактором
- **[Zustand](https://github.com/pmndrs/zustand)** + стейт-машины - Гибридный подход
- Собственная реализация - Для простых случаев

## Когда использовать стейт-машины?
✅ Сложная UI-логика (формы, многошаговые процессы)  
✅ Приложения с четкими бизнес-правилами (банкинг, CRM)  
✅ Когда важно избегать "невозможных" состояний  